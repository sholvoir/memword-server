import{$ as e,At as t,Et as n,L as r,X as i,_t as a,d as o,dt as s,ft as c,gt as l,h as u,m as d,n as f,r as p,s as m,t as h,u as g,vt as _,x as v,xt as y}from"./dialog-CZrTrFAj.js";import{n as b,t as x}from"./about-DZ5Lk3Gd.js";var S=y(`<div class="w-64 m-auto flex flex-col"><label for=name>用户名</label><div class="text-right mb-3">尚未<!>?</div><label for=code>临时密码`),C,w=()=>{let[e,c]=t(``),[d,g]=t(0),[_,y]=t(!0),x=async()=>{y(!1),g(60),C=setInterval(()=>{g(e=>e-1)<=0&&(clearInterval(C),C=void 0,y(!0))},1e3);try{switch((await i(o())).status){case s.BadRequest:return v(`请输入用户名`);case s.NotFound:return v(`未找到用户`);case s.FailedDependency:return v(`此用户未注册手机号码`);case s.TooEarly:return v(`请求OTP过于频繁`);case s.OK:return v(`OTP已发送`);default:v(`未知服务器错误`)}}catch{v(`网络错误`)}},w=async()=>{try{switch(await r(o(),e())){case s.BadRequest:return v(`请输入用户名和密码`);case s.NotFound:return v(`未找到用户`);case s.Unauthorized:return v(`错误的密码`);case s.OK:v(`已登录`),C&&clearInterval(C),location.reload();break;default:v(`未知服务器错误`)}}catch{v(`网络错误`)}};return n(h,{class:`p-2 flex flex-col`,title:`登录`,get left(){return n(p,{class:`text-[150%] icon--material-symbols icon--material-symbols--chevron-left align-bottom`,onClick:()=>m(`#about`)})},get children(){var t=S(),r=t.firstChild.nextSibling,i=r.firstChild.nextSibling;return i.nextSibling,r.nextSibling,l(t,n(b,{name:`name`,placeholder:`name`,autoCapitalize:`none`,get binding(){return[o,u]}}),r),l(r,n(p,{class:`btn-anchor font-bold`,onClick:()=>m(`#signup`),children:`注册`}),i),l(t,n(b,{name:`code`,placeholder:`code`,autoCapitalize:`none`,binding:[e,c]}),null),l(t,n(p,{class:`btn-anchor block text-right mb-3`,onClick:x,get disabled(){return!_()},get children(){return[`Send One-Time Passcode `,a(()=>a(()=>d()>0)()?`(${d()})`:``)]}}),null),l(t,n(f,{class:`button btn-prime`,onClick:w,children:`登录`}),null),t}})},T=y(`<div class="w-64 m-auto flex flex-col pb-4"><label for=name>用户名</label><label for=phone>手机号码(含国际区号)</label><div class="text-right mb-3">已经注册，请`),E=/^[_\w-]+$/,D=/^\+\d+$/,O=()=>{let[r,i]=t(``),a=()=>{m(`#signin`)},c=async()=>{if(!E.test(o()))return v(`Name can only include _, letter, number and -`);let t=r().replaceAll(/[() -]/g,``);if(!D.test(t))return v(`Invalid phone number!`);try{switch((await e(t,o())).status){case s.BadRequest:return v(`用户名已注册`);case s.Conflict:return v(`电话号码已注册`);case s.OK:return v(`注册成功，请登录`),m(`#signin`);default:v(`未知数服务器错误`)}}catch{v(`网络错误`)}};return n(h,{class:`p-2 flex flex-col`,title:`注册`,get left(){return n(p,{class:`text-[150%] icon--material-symbols icon--material-symbols--chevron-left align-bottom`,onClick:()=>m(`#about`)})},get children(){var e=T(),t=e.firstChild.nextSibling,s=t.nextSibling;return s.firstChild,l(e,n(b,{name:`name`,placeholder:`name`,autoCapitalize:`none`,get binding(){return[o,u]},class:`mb-3`}),t),l(e,n(b,{name:`phone`,placeholder:`+1(987)765-5432`,autoCapitalize:`none`,binding:[r,i],class:`mb-3`}),s),l(s,n(p,{class:`btn-anchor font-bold`,onClick:a,children:`登录`}),null),l(e,n(f,{class:`button btn-prime py-1`,onClick:c,children:`注册`}),null),e}})},k=()=>{let e=new Map;return e.set(`#about`,x),e.set(`#signup`,O),e.set(`#signin`,w),d(`#about`),n(c,{get component(){return e.get(g())}})};_(()=>n(k,{}),document.getElementById(`root`));