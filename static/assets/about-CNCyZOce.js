import{Dt as e,R as t,S as n,St as r,Z as i,_t as a,d as o,et as s,ft as c,h as l,jt as u,m as d,n as f,pt as p,r as m,s as h,t as g,u as _,vt as v,yt as y}from"./dialog-BqpYRYfK.js";import{n as b,t as x}from"./about-1qFLp-qg.js";var S=r(`<div class="w-64 m-auto flex flex-col"><label for=name>用户名</label><div class="text-right mb-3">尚未<!>?</div><label for=code>临时密码`),C,w=()=>{let[r,s]=u(``),[d,p]=u(0),[_,y]=u(!0),x=async()=>{y(!1),p(60),C=setInterval(()=>{p(e=>e-1)<=0&&(clearInterval(C),C=void 0,y(!0))},1e3);try{switch((await i(o())).status){case c.BadRequest:return n(`请输入用户名`);case c.NotFound:return n(`未找到用户`);case c.FailedDependency:return n(`此用户未注册手机号码`);case c.TooEarly:return n(`请求OTP过于频繁`);case c.OK:return n(`OTP已发送`);default:n(`未知服务器错误`)}}catch{n(`网络错误`)}},w=async()=>{try{switch(await t(o(),r())){case c.BadRequest:return n(`请输入用户名和密码`);case c.NotFound:return n(`未找到用户`);case c.Unauthorized:return n(`错误的密码`);case c.OK:n(`已登录`),C&&clearInterval(C),location.reload();break;default:n(`未知服务器错误`)}}catch{n(`网络错误`)}};return e(g,{class:`p-2 flex flex-col`,title:`登录`,get left(){return e(m,{class:`text-[150%] icon--material-symbols icon--material-symbols--chevron-left align-bottom`,onClick:()=>h(`#about`)})},get children(){var t=S(),n=t.firstChild.nextSibling,i=n.firstChild.nextSibling;return i.nextSibling,n.nextSibling,a(t,e(b,{name:`name`,placeholder:`name`,autoCapitalize:`none`,get binding(){return[o,l]}}),n),a(n,e(m,{class:`btn-anchor font-bold`,onClick:()=>h(`#signup`),children:`注册`}),i),a(t,e(b,{name:`code`,placeholder:`code`,autoCapitalize:`none`,binding:[r,s]}),null),a(t,e(m,{class:`btn-anchor block text-right mb-3`,onClick:x,get disabled(){return!_()},get children(){return[`Send One-Time Passcode `,v(()=>v(()=>d()>0)()?`(${d()})`:``)]}}),null),a(t,e(f,{class:`button btn-prime`,onClick:w,children:`登录`}),null),t}})},T=r(`<div class="w-64 m-auto flex flex-col pb-4"><label for=name>用户名</label><label for=phone>手机号码(含国际区号)</label><div class="text-right mb-3">已经注册，请`),E=/^[_\w-]+$/,D=/^\+\d+$/,O=()=>{let[t,r]=u(``),i=()=>{h(`#signin`)},d=async()=>{if(!E.test(o()))return n(`Name can only include _, letter, number and -`);let e=t().replaceAll(/[() -]/g,``);if(!D.test(e))return n(`Invalid phone number!`);try{switch((await s(e,o())).status){case c.BadRequest:return n(`用户名已注册`);case c.Conflict:return n(`电话号码已注册`);case c.OK:return n(`注册成功，请登录`),h(`#signin`);default:n(`未知数服务器错误`)}}catch{n(`网络错误`)}};return e(g,{class:`p-2 flex flex-col`,title:`注册`,get left(){return e(m,{class:`text-[150%] icon--material-symbols icon--material-symbols--chevron-left align-bottom`,onClick:()=>h(`#about`)})},get children(){var n=T(),s=n.firstChild.nextSibling,c=s.nextSibling;return c.firstChild,a(n,e(b,{name:`name`,placeholder:`name`,autoCapitalize:`none`,get binding(){return[o,l]},class:`mb-3`}),s),a(n,e(b,{name:`phone`,placeholder:`+1(987)765-5432`,autoCapitalize:`none`,binding:[t,r],class:`mb-3`}),c),a(c,e(m,{class:`btn-anchor font-bold`,onClick:i,children:`登录`}),null),a(n,e(f,{class:`button btn-prime py-1`,onClick:d,children:`注册`}),null),n}})},k=()=>{let t=new Map;return t.set(`#about`,x),t.set(`#signup`,O),t.set(`#signin`,w),d(`#about`),e(p,{get component(){return t.get(_())}})};y(()=>e(k,{}),document.getElementById(`root`));