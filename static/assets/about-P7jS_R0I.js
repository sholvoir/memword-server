import{B as e,Ct as t,Mt as n,Ot as r,Q as i,S as a,bt as o,d as s,h as c,m as l,mt as u,n as d,pt as f,r as p,s as m,t as h,tt as g,u as _,vt as v,yt as y}from"./dialog-CX8c_5BQ.js";import{n as b,t as x}from"./about-D5Nl4xA0.js";var S=t(`<div class="w-64 m-auto flex flex-col"><label for=name>用户名</label><div class="text-right mb-3">尚未<!>?</div><label for=code>临时密码`),C,w=()=>{let[t,o]=n(``),[l,u]=n(0),[g,_]=n(!0),x=async()=>{_(!1),u(60),C=setInterval(()=>{u(e=>e-1)<=0&&(clearInterval(C),C=void 0,_(!0))},1e3);try{switch((await i(s())).status){case f.BadRequest:return a(`请输入用户名`);case f.NotFound:return a(`未找到用户`);case f.FailedDependency:return a(`此用户未注册手机号码`);case f.TooEarly:return a(`请求OTP过于频繁`);case f.OK:return a(`OTP已发送`);default:a(`未知服务器错误`)}}catch{a(`网络错误`)}},w=async()=>{try{switch(await e(s(),t())){case f.BadRequest:return a(`请输入用户名和密码`);case f.NotFound:return a(`未找到用户`);case f.Unauthorized:return a(`错误的密码`);case f.OK:a(`已登录`),C&&clearInterval(C),location.reload();break;default:a(`未知服务器错误`)}}catch{a(`网络错误`)}};return r(h,{class:`p-2 flex flex-col`,title:`登录`,get left(){return r(p,{class:`text-[150%] icon-[material-symbols--chevron-left] align-bottom`,onClick:()=>m(`#about`)})},get children(){var e=S(),n=e.firstChild,i=n.nextSibling,a=i.firstChild,u=a.nextSibling;return u.nextSibling,i.nextSibling,v(e,r(b,{name:`name`,placeholder:`name`,autoCapitalize:`none`,get binding(){return[s,c]}}),i),v(i,r(p,{class:`btn-anchor font-bold`,onClick:()=>m(`#signup`),children:`注册`}),u),v(e,r(b,{name:`code`,placeholder:`code`,autoCapitalize:`none`,binding:[t,o]}),null),v(e,r(p,{class:`btn-anchor block text-right mb-3`,onClick:x,get disabled(){return!g()},get children(){return[`Send One-Time Passcode `,y(()=>y(()=>l()>0)()?`(${l()})`:``)]}}),null),v(e,r(d,{class:`button btn-prime`,onClick:w,children:`登录`}),null),e}})},T=t(`<div class="w-64 m-auto flex flex-col pb-4"><label for=name>用户名</label><label for=phone>手机号码(含国际区号)</label><div class="text-right mb-3">已经注册，请`),E=/^[_\w-]+$/,D=/^\+\d+$/,O=()=>{let[e,t]=n(``),i=()=>{m(`#signin`)},o=async()=>{if(!E.test(s()))return a(`Name can only include _, letter, number and -`);let t=e().replaceAll(/[() -]/g,``);if(!D.test(t))return a(`Invalid phone number!`);try{switch((await g(t,s())).status){case f.BadRequest:return a(`用户名已注册`);case f.Conflict:return a(`电话号码已注册`);case f.OK:return a(`注册成功，请登录`),m(`#signin`);default:a(`未知数服务器错误`)}}catch{a(`网络错误`)}};return r(h,{class:`p-2 flex flex-col`,title:`注册`,get left(){return r(p,{class:`text-[150%] icon-[material-symbols--chevron-left] align-bottom`,onClick:()=>m(`#about`)})},get children(){var n=T(),a=n.firstChild,l=a.nextSibling,u=l.nextSibling;return u.firstChild,v(n,r(b,{name:`name`,placeholder:`name`,autoCapitalize:`none`,get binding(){return[s,c]},class:`mb-3`}),l),v(n,r(b,{name:`phone`,placeholder:`+1(987)765-5432`,autoCapitalize:`none`,binding:[e,t],class:`mb-3`}),u),v(u,r(p,{class:`btn-anchor font-bold`,onClick:i,children:`登录`}),null),v(n,r(d,{class:`button btn-prime py-1`,onClick:o,children:`注册`}),null),n}})},k=()=>{let e=new Map;return e.set(`#about`,x),e.set(`#signup`,O),e.set(`#signin`,w),l(`#about`),r(u,{get component(){return e.get(_())}})};o(()=>r(k,{}),document.getElementById(`root`));