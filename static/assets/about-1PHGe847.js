import{Dt as e,L as t,St as n,Z as r,_t as i,d as a,et as o,ft as s,h as c,jt as l,m as u,n as d,pt as f,r as p,s as m,t as h,u as g,vt as _,x as v,yt as y}from"./dialog-Bm6HIflT.js";import{n as b,t as x}from"./about-ByF_DE9S.js";var S=n(`<div class="w-64 m-auto flex flex-col"><label for=name>用户名</label><div class="text-right mb-3">尚未<!>?</div><label for=code>临时密码`),C,w=()=>{let[n,o]=l(``),[u,f]=l(0),[g,y]=l(!0),x=async()=>{y(!1),f(60),C=setInterval(()=>{f(e=>e-1)<=0&&(clearInterval(C),C=void 0,y(!0))},1e3);try{switch((await r(a())).status){case s.BadRequest:return v(`请输入用户名`);case s.NotFound:return v(`未找到用户`);case s.FailedDependency:return v(`此用户未注册手机号码`);case s.TooEarly:return v(`请求OTP过于频繁`);case s.OK:return v(`OTP已发送`);default:v(`未知服务器错误`)}}catch{v(`网络错误`)}},w=async()=>{try{switch(await t(a(),n())){case s.BadRequest:return v(`请输入用户名和密码`);case s.NotFound:return v(`未找到用户`);case s.Unauthorized:return v(`错误的密码`);case s.OK:v(`已登录`),C&&clearInterval(C),location.reload();break;default:v(`未知服务器错误`)}}catch{v(`网络错误`)}};return e(h,{class:`p-2 flex flex-col`,title:`登录`,get left(){return e(p,{class:`text-[150%] icon--material-symbols icon--material-symbols--chevron-left align-bottom`,onClick:()=>m(`#about`)})},get children(){var t=S(),r=t.firstChild.nextSibling,s=r.firstChild.nextSibling;return s.nextSibling,r.nextSibling,i(t,e(b,{name:`name`,placeholder:`name`,autoCapitalize:`none`,get binding(){return[a,c]}}),r),i(r,e(p,{class:`btn-anchor font-bold`,onClick:()=>m(`#signup`),children:`注册`}),s),i(t,e(b,{name:`code`,placeholder:`code`,autoCapitalize:`none`,binding:[n,o]}),null),i(t,e(p,{class:`btn-anchor block text-right mb-3`,onClick:x,get disabled(){return!g()},get children(){return[`Send One-Time Passcode `,_(()=>_(()=>u()>0)()?`(${u()})`:``)]}}),null),i(t,e(d,{class:`button btn-prime`,onClick:w,children:`登录`}),null),t}})},T=n(`<div class="w-64 m-auto flex flex-col pb-4"><label for=name>用户名</label><label for=phone>手机号码(含国际区号)</label><div class="text-right mb-3">已经注册，请`),E=/^[_\w-]+$/,D=/^\+\d+$/,O=()=>{let[t,n]=l(``),r=()=>{m(`#signin`)},u=async()=>{if(!E.test(a()))return v(`Name can only include _, letter, number and -`);let e=t().replaceAll(/[() -]/g,``);if(!D.test(e))return v(`Invalid phone number!`);try{switch((await o(e,a())).status){case s.BadRequest:return v(`用户名已注册`);case s.Conflict:return v(`电话号码已注册`);case s.OK:return v(`注册成功，请登录`),m(`#signin`);default:v(`未知数服务器错误`)}}catch{v(`网络错误`)}};return e(h,{class:`p-2 flex flex-col`,title:`注册`,get left(){return e(p,{class:`text-[150%] icon--material-symbols icon--material-symbols--chevron-left align-bottom`,onClick:()=>m(`#about`)})},get children(){var o=T(),s=o.firstChild.nextSibling,l=s.nextSibling;return l.firstChild,i(o,e(b,{name:`name`,placeholder:`name`,autoCapitalize:`none`,get binding(){return[a,c]},class:`mb-3`}),s),i(o,e(b,{name:`phone`,placeholder:`+1(987)765-5432`,autoCapitalize:`none`,binding:[t,n],class:`mb-3`}),l),i(l,e(p,{class:`btn-anchor font-bold`,onClick:r,children:`登录`}),null),i(o,e(d,{class:`button btn-prime py-1`,onClick:u,children:`注册`}),null),o}})},k=()=>{let t=new Map;return t.set(`#about`,x),t.set(`#signup`,O),t.set(`#signin`,w),u(`#about`),e(f,{get component(){return t.get(g())}})};y(()=>e(k,{}),document.getElementById(`root`));