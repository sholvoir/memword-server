import{O as e,_ as t,a2 as n,ae as r,af as i,aj as a,ak as o,al as s,ao as c,at as l,ax as u,b as d,c as f,d as p,h as m,k as h,l as g,o as _,p as v,w as y}from"./dialog-AXHxQr7p.js";import{b,c as x}from"./about-BdQumx0m.js";var S=c(`<div class="w-64 m-auto flex flex-col"><label for=name>用户名</label><div class="text-right mb-3">尚未<!>?</div><label for=code>临时密码`);let C;var w=()=>{let[n,i]=u(``),[s,c]=u(0),[h,_]=u(!0),b=async()=>{_(!1),c(60),C=setInterval(()=>{c(e=>e-1)<=0&&(clearInterval(C),C=void 0,_(!0))},1e3);try{switch((await t(g())).status){case r.BadRequest:return y(`请输入用户名`);case r.NotFound:return y(`未找到用户`);case r.FailedDependency:return y(`此用户未注册手机号码`);case r.TooEarly:return y(`请求OTP过于频繁`);case r.OK:return y(`OTP已发送`);default:y(`未知服务器错误`)}}catch{y(`网络错误`)}},w=async()=>{try{switch(await e(g(),n())){case r.BadRequest:return y(`请输入用户名和密码`);case r.NotFound:return y(`未找到用户`);case r.Unauthorized:return y(`错误的密码`);case r.OK:y(`已登录`),C&&clearInterval(C),location.reload();break;default:y(`未知服务器错误`)}}catch{y(`网络错误`)}};return l(d,{class:`p-2 flex flex-col`,title:`登录`,get left(){return l(p,{class:`text-[150%] icon-[material-symbols--chevron-left] align-bottom`,onClick:()=>m(`#about`)})},get children(){var e=S(),t=e.firstChild,r=t.nextSibling,c=r.firstChild,u=c.nextSibling;return u.nextSibling,r.nextSibling,a(e,l(x,{name:`name`,placeholder:`name`,autoCapitalize:`none`,get binding(){return[g,v]}}),r),a(r,l(p,{class:`btn-anchor font-bold`,onClick:()=>m(`#signup`),children:`注册`}),u),a(e,l(x,{name:`code`,placeholder:`code`,autoCapitalize:`none`,binding:[n,i]}),null),a(e,l(p,{class:`btn-anchor block text-right mb-3`,onClick:b,get disabled(){return!h()},get children(){return[`Send One-Time Passcode `,o(()=>o(()=>s()>0)()?`(${s()})`:``)]}}),null),a(e,l(f,{class:`button btn-prime`,onClick:w,children:`登录`}),null),e}})},T=c(`<div class="w-64 m-auto flex flex-col pb-4"><label for=name>用户名</label><label for=phone>手机号码(含国际区号)</label><div class="text-right mb-3">已经注册，请`);const E=/^[_\w-]+$/,D=/^\+\d+$/;var O=()=>{let[e,t]=u(``),i=()=>{m(`#signin`)},o=async()=>{if(!E.test(g()))return y(`Name can only include _, letter, number and -`);let t=e().replaceAll(/[() -]/g,``);if(!D.test(t))return y(`Invalid phone number!`);try{switch((await n(t,g())).status){case r.BadRequest:return y(`用户名已注册`);case r.Conflict:return y(`电话号码已注册`);case r.OK:return y(`注册成功，请登录`),m(`#signin`);default:y(`未知数服务器错误`)}}catch{y(`网络错误`)}};return l(d,{class:`p-2 flex flex-col`,title:`注册`,get left(){return l(p,{class:`text-[150%] icon-[material-symbols--chevron-left] align-bottom`,onClick:()=>m(`#about`)})},get children(){var n=T(),r=n.firstChild,s=r.nextSibling,c=s.nextSibling;return c.firstChild,a(n,l(x,{name:`name`,placeholder:`name`,autoCapitalize:`none`,get binding(){return[g,v]},class:`mb-3`}),s),a(n,l(x,{name:`phone`,placeholder:`+1(987)765-5432`,autoCapitalize:`none`,binding:[e,t],class:`mb-3`}),c),a(c,l(p,{class:`btn-anchor font-bold`,onClick:i,children:`登录`}),null),a(n,l(f,{class:`button btn-prime py-1`,onClick:o,children:`注册`}),null),n}})};const k=()=>{let e=new Map;return e.set(`#about`,b),e.set(`#signup`,O),e.set(`#signin`,w),_(`#about`),l(i,{get component(){return e.get(h())}})};s(()=>l(k,{}),document.getElementById(`root`));