import{B as e,Q as t,S as n,d as r,h as i,m as a,n as o,r as s,s as c,t as l,tC as u,tM as d,tO as f,tb as p,tm as m,tp as h,tt as g,tv as _,ty as v,u as y}from"./dialog-BSjqJ-6i.js";import{n as b,t as x}from"./about-D4bvji1p.js";var S=u(`<div class="w-64 m-auto flex flex-col"><label for=name>用户名</label><div class="text-right mb-3">尚未<!>?</div><label for=code>临时密码`),C,w=()=>{let[a,u]=d(``),[p,m]=d(0),[g,y]=d(!0),x=async()=>{y(!1),m(60),C=setInterval(()=>{m(e=>e-1)<=0&&(clearInterval(C),C=void 0,y(!0))},1e3);try{switch((await t(r())).status){case h.BadRequest:return n(`请输入用户名`);case h.NotFound:return n(`未找到用户`);case h.FailedDependency:return n(`此用户未注册手机号码`);case h.TooEarly:return n(`请求OTP过于频繁`);case h.OK:return n(`OTP已发送`);default:n(`未知服务器错误`)}}catch{n(`网络错误`)}},w=async()=>{try{switch(await e(r(),a())){case h.BadRequest:return n(`请输入用户名和密码`);case h.NotFound:return n(`未找到用户`);case h.Unauthorized:return n(`错误的密码`);case h.OK:n(`已登录`),C&&clearInterval(C),location.reload();break;default:n(`未知服务器错误`)}}catch{n(`网络错误`)}};return f(l,{class:`p-2 flex flex-col`,title:`登录`,get left(){return f(s,{class:`text-[150%] icon-[material-symbols--chevron-left] align-bottom`,onClick:()=>c(`#about`)})},get children(){var e=S(),t=e.firstChild,n=t.nextSibling,l=n.firstChild,d=l.nextSibling;return d.nextSibling,n.nextSibling,_(e,f(b,{name:`name`,placeholder:`name`,autoCapitalize:`none`,get binding(){return[r,i]}}),n),_(n,f(s,{class:`btn-anchor font-bold`,onClick:()=>c(`#signup`),children:`注册`}),d),_(e,f(b,{name:`code`,placeholder:`code`,autoCapitalize:`none`,binding:[a,u]}),null),_(e,f(s,{class:`btn-anchor block text-right mb-3`,onClick:x,get disabled(){return!g()},get children(){return[`Send One-Time Passcode `,v(()=>v(()=>p()>0)()?`(${p()})`:``)]}}),null),_(e,f(o,{class:`button btn-prime`,onClick:w,children:`登录`}),null),e}})},T=u(`<div class="w-64 m-auto flex flex-col pb-4"><label for=name>用户名</label><label for=phone>手机号码(含国际区号)</label><div class="text-right mb-3">已经注册，请`),E=/^[_\w-]+$/,D=/^\+\d+$/,O=()=>{let[e,t]=d(``),a=()=>{c(`#signin`)},u=async()=>{if(!E.test(r()))return n(`Name can only include _, letter, number and -`);let t=e().replaceAll(/[() -]/g,``);if(!D.test(t))return n(`Invalid phone number!`);try{switch((await g(t,r())).status){case h.BadRequest:return n(`用户名已注册`);case h.Conflict:return n(`电话号码已注册`);case h.OK:return n(`注册成功，请登录`),c(`#signin`);default:n(`未知数服务器错误`)}}catch{n(`网络错误`)}};return f(l,{class:`p-2 flex flex-col`,title:`注册`,get left(){return f(s,{class:`text-[150%] icon-[material-symbols--chevron-left] align-bottom`,onClick:()=>c(`#about`)})},get children(){var n=T(),c=n.firstChild,l=c.nextSibling,d=l.nextSibling;return d.firstChild,_(n,f(b,{name:`name`,placeholder:`name`,autoCapitalize:`none`,get binding(){return[r,i]},class:`mb-3`}),l),_(n,f(b,{name:`phone`,placeholder:`+1(987)765-5432`,autoCapitalize:`none`,binding:[e,t],class:`mb-3`}),d),_(d,f(s,{class:`btn-anchor font-bold`,onClick:a,children:`登录`}),null),_(n,f(o,{class:`button btn-prime py-1`,onClick:u,children:`注册`}),null),n}})},k=()=>{let e=new Map;return e.set(`#about`,x),e.set(`#signup`,O),e.set(`#signin`,w),a(`#about`),f(m,{get component(){return e.get(y())}})};p(()=>f(k,{}),document.getElementById(`root`));